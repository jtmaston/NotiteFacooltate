<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2024-03-15T02:21:08.4946447"><title>Chapter 4: Pin assignment | NotiteFacooltate</title><script type="application/json" id="virtual-toc-data">[]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b224/app.css" rel="stylesheet"><link rel="manifest" href="site.webmanifest"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Chapter 4: Pin assignment | NotiteFacooltate"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="NotiteFacooltate Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/jtmaston.github.io/NotiteFacooltate/1.0/chapter-4-pin-assignment.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Chapter 4: Pin assignment | NotiteFacooltate"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/jtmaston.github.io/NotiteFacooltate/1.0/chapter-4-pin-assignment.html#webpage",
    "url": "writerside-documentation/jtmaston.github.io/NotiteFacooltate/1.0/chapter-4-pin-assignment.html",
    "name": "Chapter 4: Pin assignment | NotiteFacooltate",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentationjtmaston.github.io/NotiteFacooltate/#website",
    "url": "writerside-documentationjtmaston.github.io/NotiteFacooltate/",
    "name": "NotiteFacooltate Help"
}</script><!-- End Schema.org --></head><body data-id="Chapter-4-Pin-assignment" data-main-title="Chapter 4: Pin assignment" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Extra-FPGAs.md|Extra - FPGAs///Lattice-Diamond.md|Lattice Diamond"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>NotiteFacooltate 1.0 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Chapter-4-Pin-assignment" id="Chapter-4-Pin-assignment.md">Chapter 4: Pin assignment</h1><p id="ngy3xy_3105">Start by synthesizing your design. This basically translates your Verilog into a net list, highlighting inputs and outputs. The design synthesis should run without any issues, yielding a green check mark next to it. <figure id="ngy3xy_3106"><img alt="image_18.png" src="images/image_18.png" title="image_18.png" width="296" height="74"></figure></p><p id="ngy3xy_3107">If, for whatever reason, the synthesis fails, e.g. it has a red cross next to it, check the console to see what the error is. <figure id="ngy3xy_3108"><img alt="image_19.png" src="images/image_19.png" title="image_19.png" width="274" height="82"></figure><figure id="ngy3xy_3109"><img alt="image_20.png" src="images/image_20.png" title="image_20.png" width="973" height="220"></figure> Example: I removed a semicolon at the end of a line</p><p id="ngy3xy_3110">Once synthesis is complete, it's time to assign pins to inputs or outputs. As we can see in our verilog, we have 8 input pins: one clock and the seven buttons, and 9 outputs, the LEDs and a pin that allows debugging over WiFi (ignore it for now).</p><div class="code-block" data-lang="shell">
module top(input clk_25mhz,
           input [6:0] btn,
           output [7:0] led,
           output wifi_gpio0);
</div><p id="ngy3xy_3112">Next up, open the &quot;Spreadsheet view&quot;, by clicking on the first symbol below, or going to the &quot;Tools &gt; Spreadsheet view&quot; menu. <figure id="ngy3xy_3113"><img alt="image_21.png" src="images/image_21.png" title="image_21.png" width="180" height="41"></figure></p><p id="ngy3xy_3114">Spreadsheet view will now open, displaying the pin assignments. You'll see them grouped by direction (Inputs, Outputs or Unconnected), based on what you've used them for in the Verilog file. While we've declared all 7 buttons, we only use one of them, which is why the rest show up as &quot;unconnected&quot;. <figure id="ngy3xy_3115"><img alt="image_22.png" src="images/image_22.png" title="image_22.png" width="1574" height="1155"></figure></p><p id="ngy3xy_3116">So, what can we do in the spreadsheet view? Well, we can specify the location of each pin on the FPGA, so let's do that. I'll bring the table into view part of the table from chapter 1:</p><div class="table-wrapper"><table class="wide" id="ngy3xy_3117"><thead><tr class="ijRowHead" id="ngy3xy_3118"><th id="ngy3xy_3119"><p>Bus (if any)</p></th><th id="ngy3xy_3120"><p>Pin function</p></th><th id="ngy3xy_3121"><p>Mapped pin location</p></th><th id="ngy3xy_3122"><p>Notes</p></th></tr></thead><tbody><tr id="ngy3xy_3123"><td id="ngy3xy_3124"><p>-</p></td><td id="ngy3xy_3125"><p>Fire button 1</p></td><td id="ngy3xy_3126"><p>D7</p></td><td id="ngy3xy_3127"><p>Pull-up</p></td></tr><tr id="ngy3xy_3128"><td id="ngy3xy_3129"><p>-</p></td><td id="ngy3xy_3130"><p>LED 0</p></td><td id="ngy3xy_3131"><p>B2</p></td><td id="ngy3xy_3132"><p>-</p></td></tr></tbody></table></div><p id="ngy3xy_3133">Well, what's this? Where can we enter D7 on this chart? Double-click the &quot;Pin&quot; field, of course! Next up, write the value, &quot;B2&quot; in this case, then hit enter. Beware that, if you enter an erroneous value, the field will not update, and remain blank. Check your numbers! You'll also get an error in the &quot;Output&quot; window. <figure id="ngy3xy_3134"><img alt="image_23.png" src="images/image_23.png" title="image_23.png" width="1570" height="1160"></figure></p><p id="ngy3xy_3135">All right, all right, we've assigned our pins. Now what? Ready to simulate? Well, not quite. You've set the locations of each pin, which maps to the physical location on the FPGA chip, but there's more to a pin. I recommend you change (or at least validate) the following parameters:</p><ul class="list _bullet" id="ngy3xy_3136"><li class="list__item" id="ngy3xy_3137"><p>IO TYPE: sets the voltage level that the pin will obey. For my case, everything runs at 3.3V, so I will change to that.</p></li><li class="list__item" id="ngy3xy_3138"><p>PULLMODE: sets the pin's normal &quot;floating&quot; state: Pull-up pulls it normally to VCC (meaning the pin can detect if another component pulls it to ground), Pull-down does the exact opposite, pulling it to GND normally. NONE leaves it floating. I recommend you always pull up or down your pins, in order to have them be in a known state.</p></li><li class="list__item" id="ngy3xy_3139"><p>DRIVE: specifies the amount of current the pin should source, in mA.</p></li></ul><p id="ngy3xy_3140">You can find an explainer of the other values <a href="https://github.com/danderson/ulxs/blob/main/lpf.md" id="ngy3xy_3141" data-external="true" rel="noopener noreferrer">here</a>.</p><p id="ngy3xy_3142">TIP: You can bulk-change some files, such as IO Type, by selecting them all, then right-click-ing. <figure id="ngy3xy_3143"><img alt="image_24.png" src="images/image_24.png" title="image_24.png" width="1575" height="1119"></figure></p><p id="ngy3xy_3144">Once everything is set, you can verify the code that spreadsheet view generated by going to the &quot;File List&quot; toolbar, in the &quot;LPF Constraint files&quot; section. See below an example of an LPF file. <figure id="ngy3xy_3145"><img alt="image_25.png" src="images/image_25.png" title="image_25.png" width="1562" height="1142"></figure></p><p id="ngy3xy_3146">Here, you may tweak values, or add lines of code that might not be available from the spreadsheet view. For example, since we have an external oscillator, we might want to inform the Router that said pin has a stable clock into it, so that in the place-and-route process the signal is protected from interference, as well as frequency analysis passing its checks. <figure id="ngy3xy_3147"><img alt="image_26.png" src="images/image_26.png" title="image_26.png" width="1571" height="1451"></figure></p><p id="ngy3xy_3148">With the ports assigned, it's finally time to place the connections onto the FPGA.</p><div class="last-modified">Last modified: 15 March 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="chapter-3-verilog.html" class="navigation-links__prev">Chapter 3: Verilog</a><a href="chapter-5-mapping-and-simulation.html" class="navigation-links__next">Chapter 5: Mapping and Simulation</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b224/app.js"></script></body></html>