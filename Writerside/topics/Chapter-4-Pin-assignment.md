# Chapter 4: Pin assignment

Start by synthesizing your design. This basically translates your Verilog into a net list, highlighting inputs and
outputs. The design synthesis should run without any issues, yielding a green check mark next to it.
![image_18.png](image_18.png)

If, for whatever reason, the synthesis fails, e.g. it has a red cross next to it, check the console to see what the
error is.
![image_19.png](image_19.png)
![image_20.png](image_20.png)
Example: I removed a semicolon at the end of a line

Once synthesis is complete, it's time to assign pins to inputs or outputs. As we can see in our verilog, we have 8 input
pins: one clock and the seven buttons, and 9 outputs, the LEDs and a pin that allows debugging over WiFi (ignore it for
now).

```Generic
module top(input clk_25mhz,
           input [6:0] btn,
           output [7:0] led,
           output wifi_gpio0);
```

Next up, open the "Spreadsheet view", by clicking on the first symbol below, or going to the "Tools > Spreadsheet view" menu.
![image_21.png](image_21.png)


Spreadsheet view will now open, displaying the pin assignments. You'll see them grouped by direction (Inputs, Outputs or
Unconnected), based on what you've used them for in the Verilog file. While we've declared all 7 buttons, we only use
one of them, which is why the rest show up as "unconnected".
![image_22.png](image_22.png)

So, what can we do in the spreadsheet view? Well, we can specify the location of each pin on the FPGA, so let's do that.
I'll bring the table into view part of the table from chapter 1:

| Bus (if any) | Pin function  | Mapped pin location | Notes     |
|--------------|---------------|---------------------|-----------|
| -            | Fire button 1 | D7                  | Pull-up   |
| -            | LED 0         | B2                  | -         |

Well, what's this? Where can we enter D7 on this chart? Double-click the "Pin" field, of course! Next up, write the value,
"B2" in this case, then hit enter. Beware that, if you enter an erroneous value, the field will not update, and remain
blank. Check your numbers! You'll also get an error in the "Output" window.
![image_23.png](image_23.png)

All right, all right, we've assigned our pins. Now what? Ready to simulate? Well, not quite. You've set the locations of
each pin, which maps to the physical location on the FPGA chip, but there's more to a pin. I recommend you change (or
at least validate) the following parameters:
- IO TYPE: sets the voltage level that the pin will obey. For my case, everything runs at 3.3V, so I will change to that.
- PULLMODE: sets the pin's normal "floating" state: Pull-up pulls it normally to VCC (meaning the pin can detect if
another component pulls it to ground), Pull-down does the exact opposite, pulling it to GND normally. NONE leaves it
floating. I recommend you always pull up or down your pins, in order to have them be in a known state.
- DRIVE: specifies the amount of current the pin should source, in mA.

You can find an explainer of the other values [here](https://github.com/danderson/ulxs/blob/main/lpf.md).

TIP: You can bulk-change some files, such as IO Type, by selecting them all, then right-click-ing.
![image_24.png](image_24.png)

Once everything is set, you can verify the code that spreadsheet view generated by going to the "File List" toolbar, in
the "LPF Constraint files" section. See below an example of an LPF file.
![image_25.png](image_25.png)

Here, you may tweak values, or add lines of code that might not be available from the spreadsheet view. For example,
since we have an external oscillator, we might want to inform the Router that said pin has a stable clock into it, so
that in the place-and-route process the signal is protected from interference, as well as frequency analysis passing
its checks.
![image_26.png](image_26.png)

With the ports assigned, it's finally time to place the connections onto the FPGA.